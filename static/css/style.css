/* ════════════════════════════════════════════════════════════
   style.css  —  Gemma Chat design system
   Aesthetic: warm editorial dark — obsidian base, amber accents,
   crisp Sora headings + mono code feel.
   ════════════════════════════════════════════════════════════ */

/* ── Tokens ─────────────────────────────────────────────── */
:root {
  --bg-0:      #0d0d0f;   /* deepest background             */
  --bg-1:      #141417;   /* sidebar / panels               */
  --bg-2:      #1c1c21;   /* cards, inputs                  */
  --bg-3:      #252529;   /* hover states                   */
  --line:      #2e2e35;   /* borders                        */

  --amber:     #f5a623;   /* primary accent                 */
  --amber-dim: #c17c10;
  --amber-glow:rgba(245,166,35,.15);

  --text-1:    #f0efea;   /* primary text                   */
  --text-2:    #9c9b96;   /* secondary / muted              */
  --text-3:    #5a5a5f;   /* placeholder                    */

  --user-bubble:  #23232a;
  --ai-bubble:    #1a1a1f;
  --danger:    #e05252;

  --radius-sm: 6px;
  --radius-md: 12px;
  --radius-lg: 18px;

  --sidebar-w: 270px;
  --font-head: "Sora", sans-serif;
  --font-body: "DM Sans", sans-serif;
  --font-mono: "JetBrains Mono", monospace;

  --transition: 140ms ease;
}

/* ── Reset & base ────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  height: 100%;
  background: var(--bg-0);
  color: var(--text-1);
  font-family: var(--font-body);
  font-size: 15px;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
}

a { color: var(--amber); text-decoration: none; }
a:hover { color: var(--text-1); }

button {
  cursor: pointer;
  font-family: var(--font-body);
  border: none;
  background: none;
}

/* ════════════════════════════════════════════════════════════
   LANDING PAGE (index.html)
   ════════════════════════════════════════════════════════════ */
.landing {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  text-align: center;
  background:
    radial-gradient(ellipse 60% 40% at 50% 0%, rgba(245,166,35,.08) 0%, transparent 70%),
    var(--bg-0);
}

.landing-logo {
  font-family: var(--font-mono);
  font-size: .78rem;
  letter-spacing: .22em;
  text-transform: uppercase;
  color: var(--amber);
  margin-bottom: 2.5rem;
  opacity: .8;
}

.landing h1 {
  font-family: var(--font-head);
  font-size: clamp(2.4rem, 6vw, 5rem);
  font-weight: 700;
  line-height: 1.12;
  letter-spacing: -.03em;
  color: var(--text-1);
  max-width: 720px;
  margin-bottom: 1rem;
}

.landing h1 span {
  color: var(--amber);
}

.landing-sub {
  color: var(--text-2);
  font-size: 1.1rem;
  max-width: 480px;
  margin-bottom: 2.8rem;
}

/* Auth form card */
.auth-card {
  background: var(--bg-1);
  border: 1px solid var(--line);
  border-radius: var(--radius-lg);
  padding: 2.4rem;
  width: 100%;
  max-width: 400px;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.auth-card input[type="email"],
.auth-card input[type="password"] {
  width: 100%;
  background: var(--bg-2);
  border: 1px solid var(--line);
  border-radius: var(--radius-sm);
  padding: .72rem 1rem;
  color: var(--text-1);
  font-family: var(--font-body);
  font-size: .95rem;
  outline: none;
  transition: border-color var(--transition);
}

.auth-card input:focus {
  border-color: var(--amber);
}

.auth-card input::placeholder { color: var(--text-3); }

.auth-actions {
  display: flex;
  gap: .8rem;
}

/* Primary button */
.btn-primary {
  flex: 1;
  background: var(--amber);
  color: #0d0d0f;
  font-weight: 700;
  font-size: .95rem;
  border-radius: var(--radius-sm);
  padding: .72rem 1.2rem;
  transition: background var(--transition), transform var(--transition);
}

.btn-primary:hover {
  background: #f9b840;
  transform: translateY(-1px);
}

.btn-primary:active { transform: translateY(0); }

/* Ghost button */
.btn-ghost {
  flex: 1;
  background: transparent;
  color: var(--text-2);
  font-weight: 600;
  font-size: .95rem;
  border: 1px solid var(--line);
  border-radius: var(--radius-sm);
  padding: .72rem 1.2rem;
  transition: color var(--transition), border-color var(--transition);
}

.btn-ghost:hover {
  color: var(--text-1);
  border-color: var(--amber);
}

/* Error message */
.auth-error {
  display: none;
  color: var(--danger);
  font-size: .85rem;
  background: rgba(224,82,82,.1);
  border: 1px solid rgba(224,82,82,.3);
  border-radius: var(--radius-sm);
  padding: .5rem .8rem;
}

/* ════════════════════════════════════════════════════════════
   CHAT PAGE (chat.html)
   ════════════════════════════════════════════════════════════ */

/* Full-viewport flex layout */
.chat-layout {
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* ── Sidebar ─────────────────────────────────────────────── */
.sidebar {
  width: var(--sidebar-w);
  min-width: var(--sidebar-w);
  background: var(--bg-1);
  border-right: 1px solid var(--line);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.sidebar-header {
  padding: 1.2rem 1rem .8rem;
  border-bottom: 1px solid var(--line);
}

.sidebar-logo {
  font-family: var(--font-mono);
  font-size: .72rem;
  letter-spacing: .2em;
  color: var(--amber);
  text-transform: uppercase;
  margin-bottom: .8rem;
}

.btn-new-chat {
  width: 100%;
  display: flex;
  align-items: center;
  gap: .6rem;
  background: var(--amber-glow);
  border: 1px solid rgba(245,166,35,.3);
  color: var(--amber);
  font-weight: 600;
  font-size: .88rem;
  border-radius: var(--radius-sm);
  padding: .62rem 1rem;
  transition: background var(--transition);
}

.btn-new-chat:hover {
  background: rgba(245,166,35,.25);
}

.btn-new-chat svg { flex-shrink: 0; }

/* Chat list */
.chat-list {
  flex: 1;
  overflow-y: auto;
  list-style: none;
  padding: .6rem 0;
  scrollbar-width: thin;
  scrollbar-color: var(--line) transparent;
}

.chat-list::-webkit-scrollbar { width: 4px; }
.chat-list::-webkit-scrollbar-thumb { background: var(--line); border-radius: 4px; }

.chat-item {
  display: flex;
  align-items: center;
  gap: .4rem;
  padding: .5rem 1rem;
  cursor: pointer;
  border-radius: 0;
  transition: background var(--transition);
}

.chat-item:hover { background: var(--bg-3); }

.chat-item.active {
  background: var(--bg-3);
  border-right: 2px solid var(--amber);
}

.chat-title {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: .88rem;
  color: var(--text-2);
}

.chat-item.active .chat-title { color: var(--text-1); }

.delete-btn {
  font-size: .75rem;
  color: var(--text-3);
  padding: 2px 5px;
  border-radius: 4px;
  opacity: 0;
  transition: opacity var(--transition), color var(--transition), background var(--transition);
  flex-shrink: 0;
}

.chat-item:hover .delete-btn { opacity: 1; }
.delete-btn:hover { color: var(--danger); background: rgba(224,82,82,.12); }

.empty-hint {
  padding: 1rem;
  color: var(--text-3);
  font-size: .85rem;
  text-align: center;
}

/* Sidebar footer */
.sidebar-footer {
  padding: .8rem 1rem;
  border-top: 1px solid var(--line);
  display: flex;
  align-items: center;
  gap: .6rem;
}

.user-avatar {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  background: var(--bg-3);
  border: 1px solid var(--line);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: .65rem;
  color: var(--amber);
  flex-shrink: 0;
}

#user-email {
  flex: 1;
  font-size: .78rem;
  color: var(--text-2);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.btn-logout {
  font-size: .78rem;
  color: var(--text-3);
  padding: .3rem .5rem;
  border-radius: var(--radius-sm);
  transition: color var(--transition), background var(--transition);
}

.btn-logout:hover { color: var(--danger); background: rgba(224,82,82,.1); }


/* ── Main panel ──────────────────────────────────────────── */
.main-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--bg-0);
}

.main-header {
  padding: 1rem 1.4rem;
  border-bottom: 1px solid var(--line);
  font-family: var(--font-mono);
  font-size: .7rem;
  letter-spacing: .15em;
  color: var(--text-3);
  text-transform: uppercase;
  flex-shrink: 0;
}

/* Messages */
.messages-panel {
  flex: 1;
  overflow-y: auto;
  padding: 1.5rem 1.4rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  scrollbar-width: thin;
  scrollbar-color: var(--line) transparent;
}

.messages-panel::-webkit-scrollbar { width: 4px; }
.messages-panel::-webkit-scrollbar-thumb { background: var(--line); border-radius: 4px; }

.empty-chat {
  margin: auto;
  color: var(--text-3);
  font-size: .9rem;
  text-align: center;
}

.empty-chat.error { color: var(--danger); }

/* Message bubbles */
.message {
  display: flex;
}

.message.user { justify-content: flex-end; }
.message.assistant { justify-content: flex-start; }

.bubble {
  max-width: 72%;
  padding: .72rem 1rem;
  border-radius: var(--radius-md);
  font-size: .92rem;
  line-height: 1.65;
  white-space: pre-wrap;
  word-break: break-word;
}

.message.user .bubble {
  background: var(--user-bubble);
  border-bottom-right-radius: 4px;
  color: var(--text-1);
}

.message.assistant .bubble {
  background: var(--ai-bubble);
  border: 1px solid var(--line);
  border-bottom-left-radius: 4px;
  color: var(--text-1);
}

/* Typing indicator */
.typing { display: flex; gap: 5px; align-items: center; padding: .8rem 1rem; }
.typing span {
  display: inline-block;
  width: 7px; height: 7px;
  background: var(--text-3);
  border-radius: 50%;
  animation: bounce 1.2s infinite ease;
}
.typing span:nth-child(2) { animation-delay: .2s; }
.typing span:nth-child(3) { animation-delay: .4s; }

@keyframes bounce {
  0%, 80%, 100% { transform: translateY(0); opacity: .5; }
  40%           { transform: translateY(-7px); opacity: 1; }
}

/* Input area */
.chat-input-area {
  display: none; /* hidden until a chat is opened */
  padding: 1rem 1.4rem;
  border-top: 1px solid var(--line);
  align-items: flex-end;
  gap: .8rem;
  background: var(--bg-0);
  flex-shrink: 0;
}

#msg-input {
  flex: 1;
  background: var(--bg-2);
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  padding: .72rem 1rem;
  color: var(--text-1);
  font-family: var(--font-body);
  font-size: .95rem;
  resize: none;
  max-height: 180px;
  outline: none;
  transition: border-color var(--transition);
  scrollbar-width: thin;
}

#msg-input::placeholder { color: var(--text-3); }
#msg-input:focus { border-color: var(--amber); }

#send-btn {
  width: 42px;
  height: 42px;
  background: var(--amber);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: background var(--transition), transform var(--transition);
}

#send-btn:hover { background: #f9b840; transform: scale(1.06); }
#send-btn:active { transform: scale(.97); }

#send-btn svg { stroke: #0d0d0f; }


/* ── Auth overlay (chat page, not logged in) ─────────────── */
.auth-overlay {
  display: none; /* shown via JS when no token */
  position: fixed;
  inset: 0;
  background: rgba(13,13,15,.92);
  backdrop-filter: blur(8px);
  z-index: 100;
  align-items: center;
  justify-content: center;
  text-align: center;
  flex-direction: column;
  gap: 1.2rem;
  padding: 2rem;
}

.auth-overlay h2 {
  font-family: var(--font-head);
  font-size: 1.6rem;
  color: var(--text-1);
}

.auth-overlay p { color: var(--text-2); }

.auth-overlay .btn-primary {
  display: inline-block;
  padding: .72rem 2rem;
}


/* ── Responsive ──────────────────────────────────────────── */
@media (max-width: 640px) {
  .sidebar {
    width: 220px;
    min-width: 220px;
  }

  .bubble { max-width: 90%; }
}

@media (max-width: 480px) {
  .chat-layout { flex-direction: column; }

  .sidebar {
    width: 100%;
    min-width: 100%;
    height: 44px;
    overflow: hidden;
    border-right: none;
    border-bottom: 1px solid var(--line);
  }
}
